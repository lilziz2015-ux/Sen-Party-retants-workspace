<!DOCTYPE html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width, initial-scale=1.0">
<title>Delivery Planner — Sen Party Rentals Pro</title>
<link rel="stylesheet" href="assets/style.css">
<style>
  :root {
    --brand: #0078ff;
    --brand-light: #e6f0ff;
    --brand-dark: #004c99;
    --muted: #6b7280;
    --bg: #f8fafc;
    --white: #fff;
  }

  body {
    margin: 0;
    font-family: "Segoe UI", sans-serif;
    background: var(--bg);
    color: #1f2937;
    display: flex;
    min-height: 100vh;
  }

  /* Sidebar */
  .sidebar {
    width: 260px;
    background: var(--white);
    border-right: 1px solid #e5e7eb;
    display: flex;
    flex-direction: column;
    justify-content: space-between;
    position: fixed;
    top: 0;
    left: 0;
    bottom: 0;
    padding: 1rem;
    transition: transform 0.3s ease;
    z-index: 1000;
  }

  .sidebar.hidden {
    transform: translateX(-100%);
  }

  .sidebar .logo {
    text-align: center;
  }

  .sidebar img {
    width: 80px;
    border-radius: 50%;
    margin-bottom: 0.5rem;
  }

  .sidebar nav {
    display: flex;
    flex-direction: column;
    gap: 0.6rem;
    margin-top: 1rem;
  }

  .sidebar nav a {
    text-decoration: none;
    color: #1f2937;
    padding: 0.6rem 0.8rem;
    border-radius: 6px;
    transition: 0.2s;
  }

  .sidebar nav a:hover,
  .sidebar nav a.active {
    background: var(--brand-light);
    color: var(--brand-dark);
    font-weight: 600;
  }

  /* Main */
  .main {
    flex: 1;
    margin-left: 260px;
    padding: 2rem;
  }

  /* Topbar */
  .topbar {
    display: flex;
    justify-content: space-between;
    align-items: center;
    flex-wrap: wrap;
    margin-bottom: 2rem;
  }

  .menu-toggle {
    display: none;
    background: var(--brand);
    color: #fff;
    border: none;
    padding: 0.6rem 0.9rem;
    border-radius: 6px;
    font-size: 1.2rem;
    cursor: pointer;
  }

  .muted {
    color: var(--muted);
  }

  /* Card */
  .card {
    background: var(--white);
    border-radius: 10px;
    box-shadow: 0 2px 6px rgba(0, 0, 0, 0.05);
    margin-bottom: 1.5rem;
    padding: 1.5rem;
  }

  /* Toolbar */
  .toolbar {
    display: flex;
    gap: 0.5rem;
    flex-wrap: wrap;
  }

  select {
    padding: 0.6rem;
    border-radius: 8px;
    border: 1px solid #ddd;
  }

  /* Agenda list */
  .agenda-list {
    list-style: none;
    margin-top: 1rem;
    padding-left: 0;
  }

  .agenda-list li {
    background: #f9fafb;
    border-radius: 8px;
    padding: 0.8rem 1rem;
    margin-bottom: 0.6rem;
    border-left: 5px solid var(--brand);
    display: flex;
    flex-direction: column;
    gap: 0.3rem;
  }

  .agenda-list small {
    color: var(--muted);
  }

  /* Checkbox line */
  .agenda-list input[type="checkbox"] {
    margin-right: 0.5rem;
  }

  footer {
    text-align: center;
    font-size: 0.85rem;
    color: var(--muted);
    margin-top: 2rem;
  }

  /* Responsive */
  @media (max-width: 900px) {
    .main {
      margin-left: 0;
    }

    .menu-toggle {
      display: block;
      margin-bottom: 1rem;
    }

    .sidebar {
      transform: translateX(-100%);
    }

    .sidebar.show {
      transform: translateX(0);
    }

    body {
      overflow-x: hidden;
    }
  }
</style>
</head>
<body>

<!-- Sidebar -->
<aside class="sidebar hidden" id="sidebar">
  <div class="logo">
    <img src="02B58D79-6737-47EA-8099-73006879E55A Small.jpeg" alt="Logo">
    <h2>Sen Party Rentals Pro</h2>
  </div>
  <nav>
    <a href="index.html">🏠 Dashboard</a>
    <a href="bookings.html">📅 Bookings</a>
    <a href="calendar.html">🗓️ Calendar</a>
    <a href="customers.html">👥 Customers</a>
    <a href="invoices.html">🧾 Invoices</a>
    <a href="delivery.html" class="active">🚚 Delivery</a>
    <a href="settings.html">⚙️ Settings</a>
  </nav>
</aside>

<!-- Main -->
<main class="main">
  <header class="topbar">
    <button class="menu-toggle" id="menuToggle">☰</button>
    <div>
      <h1>Delivery & Pickup Planner</h1>
      <p class="muted">Track and manage all deliveries and pickups.</p>
    </div>
  </header>

  <section class="card">
    <div class="toolbar">
      <input id="searchDelivery" placeholder="Search by name or date..." style="flex:1;padding:0.6rem;border-radius:8px;border:1px solid #ddd;">
      <select id="filterType">
        <option value="">All Types</option>
        <option value="delivery">Delivery 🟢</option>
        <option value="pickup">Pickup 🟡</option>
      </select>
    </div>
  </section>

  <section class="card">
    <h2>Today's Deliveries & Pickups</h2>
    <ul id="deliveryList" class="agenda-list"></ul>
  </section>

  <section class="card">
    <h2>Upcoming</h2>
    <ul id="upcomingList" class="agenda-list"></ul>
  </section>

  <footer>
    <p>© 2025 Sen Party Rentals Pro — All rights reserved.</p>
  </footer>
</main>

<script>
// Sidebar toggle for mobile
const sidebar = document.getElementById('sidebar');
const toggleBtn = document.getElementById('menuToggle');
toggleBtn.addEventListener('click', () => {
  sidebar.classList.toggle('hidden');
  sidebar.classList.toggle('show');
});

// Mock data (replace with getBookings() from app.js if available)
function getBookings() {
  return [
    { id: 1, customer: "John Doe", date: new Date().toISOString().slice(0,10), address: "123 Main St", type: "delivery", done: false },
    { id: 2, customer: "Smith Family", date: new Date().toISOString().slice(0,10), address: "456 Elm Ave", type: "pickup", done: true },
    { id: 3, customer: "Williams Park", date: "2025-10-31", address: "789 Park Rd", type: "delivery", done: false },
  ];
}

function saveBookings(data) {
  console.log("Saved:", data); // Replace with localStorage or backend later
}

document.addEventListener("DOMContentLoaded", () => {
  const all = getBookings();
  const todayISO = new Date().toISOString().slice(0,10);
  const deliveryList = document.getElementById("deliveryList");
  const upcomingList = document.getElementById("upcomingList");
  const filterType = document.getElementById("filterType");
  const search = document.getElementById("searchDelivery");

  function render() {
    const type = filterType.value;
    const q = search.value.toLowerCase();
    const filtered = all.filter(b =>
      (!type || b.type === type) &&
      (b.customer.toLowerCase().includes(q) || b.date.includes(q))
    );

    const today = filtered.filter(b => b.date === todayISO);
    const upcoming = filtered.filter(b => b.date > todayISO);

    renderList(today, deliveryList);
    renderList(upcoming, upcomingList);
  }

  function renderList(data, container) {
    container.innerHTML = "";
    if (data.length === 0) {
      container.innerHTML = "<li class='muted'>No tasks found.</li>";
      return;
    }
    data.forEach(b => {
      const li = document.createElement("li");
      li.innerHTML = `
        <div>
          <input type="checkbox" id="chk-${b.id}" ${b.done ? "checked" : ""}>
          <label for="chk-${b.id}">${b.customer} — ${b.address}</label>
        </div>
        <small>${b.type === "delivery" ? "🟢 Delivery" : "🟡 Pickup"} | ${b.date}</small>
      `;
      li.querySelector("input").addEventListener("change", e => {
        b.done = e.target.checked;
        saveBookings(all);
      });
      container.appendChild(li);
    });
  }

  filterType.addEventListener("change", render);
  search.addEventListener("input", render);
  render();
});
</script>
</body>
</html>